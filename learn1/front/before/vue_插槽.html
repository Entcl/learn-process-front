<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<!-- 开发环境版本，包含了有帮助的命令行警告 -->
<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

<!-- 生产环境版本，优化了尺寸和速度
<script src="https://cdn.jsdelivr.net/npm/vue@2"></script> -->
<!-- Vue 实现了一套内容分发的 API，将<slot>元素作为承载分发内容的出口，
    这是vue文档上的说明。具体来说，slot就是可以让你在组件内添加内容的‘空间’。 -->
<!-- slot 废弃
推荐 2.6.0 新增的 v-slot。

预期：string

用于标记往哪个具名插槽中插入子组件内容。 -->
<!-- 
// 注册组件，传入一个扩展过的构造器
Vue.component('my-component', Vue.extend({ /* ... */ }))

// 注册组件，传入一个选项对象 (自动调用 Vue.extend)
Vue.component('my-component', { /* ... */ })

// 获取注册的组件 (始终返回构造器)
var MyComponent = Vue.component('my-component') -->

<body>
    <div id="demo">
        <todo-title v-bind:title="title"></todo-title>
        <!-- <todo-content v-for="item in items" v-bind:item="item" v-on:test="test2"></todo-content> -->
        <todo-content v-for="(item,index) in items" v-bind:item=item v-bind:index="index" v-on:test="test2(index)" v-on:test3="test4(index)"></todo-content>
    </div>
    <script type="text/javascript">
        Vue.config.productionTip = false; //阻止 vue 在启动时生成生产提示。

        Vue.component('todo', {
            template: `
                <div>
                    <todo-title></todo-title>
                    <todo-content></todo-content>
                </div>
            `
        });
        Vue.component('todo-title', {
            props: ["title"],
            template: `
                <div>
                    {{title}}
                    这是标题
                </div>
            `
        });
        Vue.component('todo-content', {
            props: ["item", "index"],
            methods: {
                test: function(index) {
                    this.$emit("test", index);
                },
                test3: function(index) {
                    this.$emit("test3", index);
                }
            },
            template: `
                    <ul>
                        <li>
                           index:{{index}}-----------------value:{{item}}
                            <button @click="test">删除</button>

                           <!-<button v-on:click="test3">测试</button>-->
                        </li>
                    </ul>
            `
        });
        var app = new Vue({
            el: "#demo",
            data: {
                title: "这是组件外的标题",
                items: ["a1", "a2", "a3"]
            },
            methods: {
                test2: function(index) {
                    console.log(index);
                    this.items.splice(index, 1);
                },
                test4: function(index) {
                    // console.log(this.items.splice(index, 1));

                }
            },
        });
        console.log(app);
    </script>
</body>

</html>